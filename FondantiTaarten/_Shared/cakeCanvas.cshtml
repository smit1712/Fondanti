<canvas id="cakeCanvas" width="800" height="500"></canvas>
<script type="text/javascript">
    class DrawCake {
        constructor() {
            this.c = document.getElementById("cakeCanvas");
            this.ctx = this.c.getContext("2d");
        }

        drawSide(x, y, width, height, colorSide, colorTop) {
            width = x + width;
            height = y + height;

            this.ctx.beginPath();
            this.ctx.moveTo(x, y);
            this.ctx.lineTo(x, height);
            this.ctx.bezierCurveTo(x, height + height / 8, width, height + height / 8, width, height);
            this.ctx.lineTo(width, y);
            this.ctx.bezierCurveTo(width, y + y / 8, x, y + y / 8, x, y);
            this.ctx.fillStyle = colorSide;
            this.ctx.strokeStyle = "rgba(20, 20, 20, 0.4)";

            this.ctx.fill();
            this.ctx.stroke();
            this.ctx.closePath();

            this.drawTop(x, y, width, height, colorTop);
        }

        drawTop(x, y, width, height, color) {
            this.ctx.beginPath();
            this.ctx.moveTo(x, y);
            this.ctx.bezierCurveTo(x, y + y / 8, width, y + y / 8, width, y);
            this.ctx.bezierCurveTo(width, y - y / 8, x, y - y / 8, x, y);
            this.ctx.fillStyle = color;
            this.ctx.fill();
            this.ctx.stroke();
            this.ctx.closePath();
        }

        drawFilling(x, y, width, height, color) {
            width = x + width;
            height = y + height;
            var fillingHeight = y + (height - y) / 2;
            var bezierHeight = fillingHeight + fillingHeight / 8;

            this.ctx.beginPath();
            this.ctx.moveTo(x, fillingHeight);
            this.ctx.bezierCurveTo(x, bezierHeight, width, bezierHeight, width, fillingHeight);
            this.ctx.lineWidth = 5;
            this.ctx.strokeStyle = color;
            this.ctx.stroke();
            this.ctx.closePath();
            this.ctx.lineWidth = 1;
        }

        drawLayers(x, y, width, height, layers, colorSide, colorTop, fillColor = "") {

            this.resetCanvas();
            for (var i = 0; i < layers; i++) {
                this.drawSide(
                    x + width / 8 * i,
                    y - height * i,
                    width - width / 4 * i,
                    height,
                    colorSide, colorTop);

                if (fillColor != "") {
                    this.drawFilling(x + width / 8 * i, y - height * i, width - width / 4 * i, height, fillColor)
                }
            }
        }

        resetCanvas() {
            this.ctx.clearRect(0, 0, this.c.width, this.c.height);
        }
    }
</script>